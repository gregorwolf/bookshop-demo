# https://api.sap.com/api/CE_PURCHASEREQUISITION_0001/overview
# SAP_COM_0102
### S/4HANA Cloud
GET {{$dotenv s4hanahost}}/sap/opu/odata4/sap/api_purchaserequisition_2/srvd_a2x/sap/purchaserequisition/0001/
Authorization: Basic {{$dotenv s4hana_username}}:{{$dotenv s4hana_password}}
Accept: application/json
###
GET {{$dotenv s4hanahost}}/sap/opu/odata4/sap/api_purchaserequisition_2/srvd_a2x/sap/purchaserequisition/0001/$metadata
Authorization: Basic {{$dotenv s4hana_username}}:{{$dotenv s4hana_password}}
###
GET {{$dotenv s4hanahost}}/sap/opu/odata4/sap/api_purchaserequisition_2/srvd_a2x/sap/purchaserequisition/0001/PurchaseReqn
  ?$top=10
  &$skip=100
  &$count=true
  &$expand=*
Authorization: Basic {{$dotenv s4hana_username}}:{{$dotenv s4hana_password}}
Accept: application/json
### Get CSRF Token
# @name getCSRF
HEAD {{$dotenv s4hanahost}}/sap/opu/odata4/sap/api_purchaserequisition_2/srvd_a2x/sap/purchaserequisition/0001/
X-CSRF-Token: Fetch
Authorization: Basic {{$dotenv s4hana_username}}:{{$dotenv s4hana_password}}
### Read Token to Variable
@CSRF={{getCSRF.response.headers.x-csrf-token}}
###
POST {{$dotenv s4hanahost}}/sap/opu/odata4/sap/api_purchaserequisition_2/srvd_a2x/sap/purchaserequisition/0001/PurchaseReqn
Authorization: Basic {{$dotenv s4hana_username}}:{{$dotenv s4hana_password}}
Accept: application/json
X-CSRF-Token: {{CSRF}}
Content-Type: application/json

{
  "PurchaseRequisitionType": "NB",
  "PurReqnDescription": "Example PR",
  "PurReqnHeaderNote": "Header Note",
  "_PurchaseRequisitionItem": [
    {
      "PurchaseRequisitionItemText": "Test PR",
      "AccountAssignmentCategory": "U",
      "Material": "02001028V",
      "FixedSupplier": "1118780",
      "SupplierMaterialNumber": "60221",
      "MaterialGroup": "A001",
      "RequestedQuantity": 1,
      "BaseUnit": "EA",
      "BaseUnitISOCode": "EA",
      "PurchaseRequisitionPrice": 1,
      "PurReqnItemCurrency": "EUR",
      "PurchasingGroup": "B10",
      "Plant": "1010",
      "CompanyCode": "1010"
    }
  ]
}
