# Documentation: Application Vulnerability Report - Authentication
# https://help.sap.com/docs/application-vulnerability-report/application-vulnerability-report-e02c6e1a86544ce981810c8c8a12e750/authentication?locale=en-US
###
### Get Access Token (Cloud Foundry using Client Credentials)
# @name requestAccessToken
POST {{$dotenv avr_tokenendpoint}}/oauth/token
Authorization: Basic {{$dotenv avr_clientid}}:{{$dotenv avr_clientsecret}}
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials
&response_type=token

### Fill Variables from Response
@access_token = {{requestAccessToken.response.body.$.access_token}}
###
GET {{$dotenv avr_apiurl}}/api/v1/provider/
Authorization: Bearer {{access_token}}
Accept: application/json
###
GET {{$dotenv avr_apiurl}}/api/v1/provider/$metadata
Authorization: Bearer {{access_token}}
###
### Call Application Vulnerability Report API
GET {{$dotenv avr_apiurl}}/api/v1/provider/Findings
  ?$count=true
Authorization: Bearer {{access_token}}
Accept: application/json
###
### Call Application Vulnerability Report API for a specific application: cap-rfc-srv
GET {{$dotenv avr_apiurl}}/api/v1/provider/Findings
  ?$count=true
  &$filter=appName eq 'cap-rfc-srv'
Authorization: Bearer {{access_token}}
Accept: application/json
### Call Application Vulnerability Report API for a specific application: reporting-srv
GET {{$dotenv avr_apiurl}}/api/v1/provider/Findings
  ?$count=true
  &$filter=appName eq 'reporting-srv'
Authorization: Bearer {{access_token}}
Accept: application/json